(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-task-inspector-management-create"],{"031f":function(t,e,i){"use strict";i.r(e);var a=i("350a"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"0c7e":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.uni-section[data-v-52234a7a]{position:relative;\n\tdisplay:-webkit-box;display:-webkit-flex;display:flex;\n\tmargin-top:10px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 10px;height:50px;background-color:#f8f8f8;\n\tfont-weight:400}\n\n.uni-section[data-v-52234a7a]:after{position:absolute;bottom:0;right:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);background-color:#e5e5e5}\n\n.uni-section__head[data-v-52234a7a]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:10px}.line[data-v-52234a7a]{height:15px;background-color:silver;border-radius:5px;width:3px}.circle[data-v-52234a7a]{width:8px;height:8px;border-top-right-radius:50px;border-top-left-radius:50px;border-bottom-left-radius:50px;border-bottom-right-radius:50px;background-color:silver}.uni-section__content[data-v-52234a7a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#333}.uni-section__content-title[data-v-52234a7a]{font-size:%?28?%;color:#333}.distraction[data-v-52234a7a]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-section__content-sub[data-v-52234a7a]{font-size:%?24?%;color:#999}',""]),t.exports=e},"2cd6":function(t,e,i){"use strict";i.r(e);var a=i("89ca"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"350a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniTitle",props:{type:{type:String,default:""},title:{type:String,default:""},subTitle:{type:String,default:""}},data:function(){return{}},watch:{title:function(t){uni.report&&""!==t&&uni.report("title",t)}},methods:{onClick:function(){this.$emit("click")}}};e.default=a},4261:function(t,e,i){"use strict";var a=i("a5c8"),n=i.n(a);n.a},4452:function(t,e,i){"use strict";i.r(e);var a=i("701d"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"60e3":function(t,e,i){"use strict";i.r(e);var a=i("e75a"),n=i("2cd6");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("9d4c");var s,o=i("f0c5"),d=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"59e9e732",null,!1,a["a"],s);e["default"]=d.exports},"701d":function(t,e,i){"use strict";i("d81d"),i("b64b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{task_info:"",taskUser:"",task_user_id:0,main_department_select:-1,main_department_list:[],department_lists:[],time_requests:[{title:"今天",value:1},{title:"明天",value:2},{title:"后天",value:3},{title:"本周",value:4},{title:"下周",value:5},{title:"本月",value:6},{title:"下个月",value:7}],time_request:1,time_request_data:"2020-01-01"}},onLoad:function(){var t=this;this.time_request_data=this.$ok.date.formatDate(new Date),this.time_request_data=this.$ok.date.formatDate(this.$ok.dataAddDay(new Date,1)),this.$api.company.department_list({department_id:1}).then((function(e){t.main_department_list=e.result.map((function(t,e){return t.level=0,t})),console.log(e)})).catch((function(t){console.info(t)}))},onShow:function(){},methods:{onDepartmentSelect:function(t,e){var i=this;if(0==t.level)this.main_department_select=e;else{var a=this.department_lists[t.level-1];a.department_select=e,this.$set(this.department_lists,t.level-1,a)}this.$api.company.department_list_and_user({department_id:t.departmentId}).then((function(e){var a=e.result.users.map((function(e,i){return e.level=t.level+1,e})),n=e.result.departments.map((function(e,i){return e.level=t.level+1,e}));i.$set(i.department_lists,t.level,{users:a,departments:n,department_select:-1,user_select:-1}),0==a.length&&0==n&&i.$set(i.department_lists,t.level,{});for(var r=0;r<i.department_lists.length;r++)r>t.level&&i.$set(i.department_lists,r,{});i.getTaskUser()})).catch((function(t){console.info(t)})),this.getTaskUser()},onUserSelect:function(t,e){for(var i=0;i<this.department_lists.length;i++){var a=this.department_lists[i];i==t.level-1?a.user_select=e:Object.keys(a).length>0&&(a.user_select=-1),this.$set(this.department_lists,i,a)}this.getTaskUser()},getTaskUser:function(){var t="",e="";this.main_department_select>=0&&(e=this.main_department_list[this.main_department_select].departmentName);for(var i=0;i<this.department_lists.length;i++){var a=this.department_lists[i];if(Object.keys(a).length>0){if(a.user_select>=0){t=e+" > "+a.users[a.user_select].idName,this.task_user_id=a.users[a.user_select].userId;break}a.department_select>=0&&(e=""==e?a.departments[a.department_select].departmentName:e+" > "+a.departments[a.department_select].departmentName)}}this.taskUser=t},onTimeTequestSelect:function(t,e){this.time_request=t.value,1==this.time_request?this.time_request_data=this.$ok.date.formatDate(new Date):2==this.time_request?this.time_request_data=this.$ok.date.formatDate(this.$ok.dataAddDay(new Date,1)):3==this.time_request?this.time_request_data=this.$ok.date.formatDate(this.$ok.dataAddDay(new Date,2)):4==this.time_request?this.time_request_data=this.$ok.date.formatDate(this.$ok.dataGetWeek(new Date,5)):5==this.time_request?this.time_request_data=this.$ok.date.formatDate(this.$ok.dataGetWeek(this.$ok.dataAddDay(new Date,7),5)):6==this.time_request?this.time_request_data=this.$ok.date.formatDate(this.$ok.dataGetMonthLastDay(new Date)):7==this.time_request&&(this.time_request_data=this.$ok.date.formatDate(this.$ok.dataGetMonthLastDay(this.$ok.dataAddMonth(new Date,1))))},getTaskInfo:function(t){this.task_info=t.detail.value},daySelect:function(){this.$refs.date1.show()},daySelectConfirm:function(t,e){this.time_request=-1,this.time_request_data=t.value},taskAdd:function(){this.task_info.length<5?uni.showToast({icon:"none",title:"任务内容不能少于5个字"}):this.$api.task.task_sponsor_create({user_id:this.task_user_id,time_request:this.time_request_data,info:this.task_info}).then((function(t){console.log(t),uni.redirectTo({url:"view?uuid="+t.result.taskUuid})})).catch((function(t){console.info(t)}))}}};e.default=a},"89ca":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniTag",props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1}},methods:{onClick:function(){!0!==this.disabled&&"true"!==this.disabled&&this.$emit("click")}}};e.default=a},"8d5f":function(t,e,i){"use strict";i.r(e);var a=i("e44e"),n=i("4452");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);var s,o=i("f0c5"),d=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"653f2922",null,!1,a["a"],s);e["default"]=d.exports},"9d4c":function(t,e,i){"use strict";var a=i("a374"),n=i.n(a);n.a},"9ff0":function(t,e,i){"use strict";i.r(e);var a=i("c608"),n=i("031f");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("4261");var s,o=i("f0c5"),d=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"52234a7a",null,!1,a["a"],s);e["default"]=d.exports},a374:function(t,e,i){var a=i("b8d5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("20431132",a,!0,{sourceMap:!1,shadowMode:!1})},a5c8:function(t,e,i){var a=i("0c7e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("109e2527",a,!0,{sourceMap:!1,shadowMode:!1})},b8d5:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".uni-tag[data-v-59e9e732]{\n\tdisplay:-webkit-box;display:-webkit-flex;display:flex;\n\tpadding:0 16px;height:30px;line-height:30px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#333;border-radius:%?6?%;background-color:#f8f8f8;border-width:%?1?%;border-style:solid;border-color:#f8f8f8}.uni-tag--circle[data-v-59e9e732]{border-radius:15px}.uni-tag--mark[data-v-59e9e732]{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:15px;border-bottom-right-radius:15px}.uni-tag--disabled[data-v-59e9e732]{opacity:.5}.uni-tag--small[data-v-59e9e732]{height:20px;padding:0 8px;line-height:20px;font-size:%?24?%}.uni-tag--default[data-v-59e9e732]{color:#333;font-size:%?28?%}.uni-tag-text--small[data-v-59e9e732]{font-size:%?24?%!important}.uni-tag-text[data-v-59e9e732]{color:#fff;font-size:%?28?%}.uni-tag-text--primary[data-v-59e9e732]{color:#007aff!important}.uni-tag-text--success[data-v-59e9e732]{color:#4cd964!important}.uni-tag-text--warning[data-v-59e9e732]{color:#f0ad4e!important}.uni-tag-text--error[data-v-59e9e732]{color:#dd524d!important}.uni-tag--primary[data-v-59e9e732]{color:#fff;background-color:#007aff;border-width:%?1?%;border-style:solid;border-color:#007aff}.primary-uni-tag--inverted[data-v-59e9e732]{color:#007aff;background-color:#fff;border-width:%?1?%;border-style:solid;border-color:#007aff}.uni-tag--success[data-v-59e9e732]{color:#fff;background-color:#4cd964;border-width:%?1?%;border-style:solid;border-color:#4cd964}.success-uni-tag--inverted[data-v-59e9e732]{color:#4cd964;background-color:#fff;border-width:%?1?%;border-style:solid;border-color:#4cd964}.uni-tag--warning[data-v-59e9e732]{color:#fff;background-color:#f0ad4e;border-width:%?1?%;border-style:solid;border-color:#f0ad4e}.warning-uni-tag--inverted[data-v-59e9e732]{color:#f0ad4e;background-color:#fff;border-width:%?1?%;border-style:solid;border-color:#f0ad4e}.uni-tag--error[data-v-59e9e732]{color:#fff;background-color:#dd524d;border-width:%?1?%;border-style:solid;border-color:#dd524d}.error-uni-tag--inverted[data-v-59e9e732]{color:#dd524d;background-color:#fff;border-width:%?1?%;border-style:solid;border-color:#dd524d}.uni-tag--inverted[data-v-59e9e732]{color:#333;background-color:#fff;border-width:%?1?%;border-style:solid;border-color:#f8f8f8}",""]),t.exports=e},c608:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-section",attrs:{nvue:!0}},[t.type?i("v-uni-view",{staticClass:"uni-section__head"},[i("v-uni-view",{staticClass:"uni-section__head-tag",class:t.type})],1):t._e(),i("v-uni-view",{staticClass:"uni-section__content"},[i("v-uni-text",{staticClass:"uni-section__content-title",class:{distraction:!t.subTitle}},[t._v(t._s(t.title))]),t.subTitle?i("v-uni-text",{staticClass:"uni-section__content-sub"},[t._v(t._s(t.subTitle))]):t._e()],1),t._t("default")],2)},r=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}))},e44e:function(t,e,i){"use strict";var a={"uni-section":i("9ff0").default,"uni-tag":i("60e3").default,"w-picker":i("69b8").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"ok_main"},[i("v-uni-view",[i("v-uni-view",{staticClass:"uni-form-item uni-column"},[i("uni-section",{attrs:{title:"任务内容",type:"line"}}),i("v-uni-view",{staticClass:"ok_box_white"},[i("v-uni-textarea",{staticStyle:{"min-height":"80px",width:"100%"},attrs:{placeholder:"请输入任务内容","auto-height":!0},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getTaskInfo.apply(void 0,arguments)}}})],1),i("uni-section",{attrs:{title:"完成时间",type:"line"}}),i("v-uni-view",{staticClass:"ok_box_white"},[i("uni-tag",{staticStyle:{"max-width":"150px"},attrs:{text:t.time_request_data,type:"warning"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.daySelect()}}}),i("v-uni-view",{staticClass:"ok_row",staticStyle:{"margin-top":"10px"}},t._l(t.time_requests,(function(e,a){return i("v-uni-view",{key:a,staticClass:"tag-view"},[i("uni-tag",{attrs:{text:e.title,type:e.value==t.time_request?"success":"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onTimeTequestSelect(e,a)}}})],1)})),1)],1),i("uni-section",{attrs:{title:"部门",type:"line"}}),i("v-uni-view",{staticClass:"ok_box_white"},[i("v-uni-view",{staticClass:"ok_row"},t._l(t.main_department_list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"tag-view"},[i("uni-tag",{attrs:{text:e.departmentName,type:a==t.main_department_select?"success":"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDepartmentSelect(e,a)}}})],1)})),1),t._l(t.department_lists,(function(e,a){return Object.keys(e).length>0?i("div",{key:a},[i("uni-section",{attrs:{title:"接收人",type:"line"}}),i("v-uni-view",{staticClass:"ok_box_white"},[i("v-uni-view",{staticClass:"ok_row"},t._l(e.users,(function(a,n){return i("v-uni-view",{key:n,staticClass:"tag-view",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onUserSelect(a,n)}}},[i("uni-tag",{attrs:{text:a.idName,type:n==e.user_select?"success":"warning"}})],1)})),1),i("v-uni-view",{staticClass:"ok_row"},t._l(e.departments,(function(a,n){return i("v-uni-view",{key:n,staticClass:"tag-view"},[i("uni-tag",{attrs:{text:a.departmentName,type:n==e.department_select?"success":"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onDepartmentSelect(a,n)}}})],1)})),1)],1)],1):t._e()})),i("v-uni-view",[t._v("当前选择："+t._s(t.taskUser))])],2)],1),i("v-uni-view",{staticClass:"ok_box_white"},[i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.taskAdd()}}},[t._v("发布任务")])],1)],1),i("w-picker",{ref:"date1",attrs:{mode:"date",startYear:"2020",endYear:"2030",value:t.time_request_data,fields:"day","disabled-after":!1},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.daySelectConfirm(e,"date1")}}})],1)},r=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}))},e75a:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.text?i("v-uni-view",{staticClass:"uni-tag",class:["uni-tag--"+t.type,!0===t.disabled||"true"===t.disabled?"uni-tag--disabled":"",!0===t.inverted||"true"===t.inverted?t.type+"-uni-tag--inverted":"",!0===t.circle||"true"===t.circle?"uni-tag--circle":"",!0===t.mark||"true"===t.mark?"uni-tag--mark":"","uni-tag--"+t.size],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick()}}},[i("v-uni-text",{class:["default"===t.type?"uni-tag--default":"uni-tag-text",!0===t.inverted||"true"===t.inverted?"uni-tag-text--"+t.type:"","small"===t.size?"uni-tag-text--small":""]},[t._v(t._s(t.text))])],1):t._e()},r=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}))}}]);